@page "/Collections/Details"
@inject CollectionService CollectionService

<PageTitle>Details</PageTitle>

<MudTable Items="@collectionItems" Hover="true" Dense="true">
    <ToolBarContent>
        <MudText Typo="Typo.h6">Collection items</MudText>
    </ToolBarContent>
    <HeaderContent>
        <MudTh>Name</MudTh>
        <MudTh>Added</MudTh>
        <MudTh>Tags</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        <MudTd DataLabel="Added">@context.CreatedDate</MudTd>
        <MudTd DataLabel="Tags">@string.Join(", ", context.Tags.Select(t => t.Name))</MudTd>
    </RowTemplate>
</MudTable>

@code {
    [SupplyParameterFromQuery]
    public int Id { get; set; }

    private IEnumerable<Item> collectionItems;

    protected override async Task OnInitializedAsync()
    {
        collectionItems = await CollectionService.GetCollectionItemsWithTags(Id);
    }
}
